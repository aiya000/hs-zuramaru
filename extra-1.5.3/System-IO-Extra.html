<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>System.IO.Extra</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_System-IO-Extra.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/System.IO.Extra.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">extra-1.5.3: Extra functions I use.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">System.IO.Extra</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Read encoding</a></li><li><a href="#g:2">Strict reading</a></li><li><a href="#g:3">Write with encoding</a></li><li><a href="#g:4">Temporary files</a></li><li><a href="#g:5">File comparison</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>More IO functions. The functions include ones for reading files with specific encodings,
   strictly reading files, and writing files with encodings. There are also some simple
   temporary file functions, more advanced alternatives can be found in
   the <a href="http://hackage.haskell.org/package/exceptions">exceptions</a> package.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short">module <a href="../base-4.9.1.0/System-IO.html">System.IO</a></li><li class="src short"><a href="#v:captureOutput">captureOutput</a> :: <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> a -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.9.1.0/Data-String.html#t:String">String</a>, a)</li><li class="src short"><a href="#v:withBuffering">withBuffering</a> :: <a href="../base-4.9.1.0/GHC-IO-Handle.html#t:Handle">Handle</a> -&gt; <a href="../base-4.9.1.0/GHC-IO-Handle.html#t:BufferMode">BufferMode</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> a -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> a</li><li class="src short"><a href="#v:readFileEncoding">readFileEncoding</a> :: <a href="../base-4.9.1.0/GHC-IO-Encoding-Types.html#t:TextEncoding">TextEncoding</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> <a href="../base-4.9.1.0/Data-String.html#t:String">String</a></li><li class="src short"><a href="#v:readFileUTF8">readFileUTF8</a> :: <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> <a href="../base-4.9.1.0/Data-String.html#t:String">String</a></li><li class="src short"><a href="#v:readFileBinary">readFileBinary</a> :: <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> <a href="../base-4.9.1.0/Data-String.html#t:String">String</a></li><li class="src short"><a href="#v:readFile-39-">readFile'</a> :: <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> <a href="../base-4.9.1.0/Data-String.html#t:String">String</a></li><li class="src short"><a href="#v:readFileEncoding-39-">readFileEncoding'</a> :: <a href="../base-4.9.1.0/GHC-IO-Encoding-Types.html#t:TextEncoding">TextEncoding</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> <a href="../base-4.9.1.0/Data-String.html#t:String">String</a></li><li class="src short"><a href="#v:readFileUTF8-39-">readFileUTF8'</a> :: <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> <a href="../base-4.9.1.0/Data-String.html#t:String">String</a></li><li class="src short"><a href="#v:readFileBinary-39-">readFileBinary'</a> :: <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> <a href="../base-4.9.1.0/Data-String.html#t:String">String</a></li><li class="src short"><a href="#v:writeFileEncoding">writeFileEncoding</a> :: <a href="../base-4.9.1.0/GHC-IO-Encoding-Types.html#t:TextEncoding">TextEncoding</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:writeFileUTF8">writeFileUTF8</a> :: <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:writeFileBinary">writeFileBinary</a> :: <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:withTempFile">withTempFile</a> :: (<a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> a) -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> a</li><li class="src short"><a href="#v:withTempDir">withTempDir</a> :: (<a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> a) -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> a</li><li class="src short"><a href="#v:newTempFile">newTempFile</a> :: <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a>, <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> ())</li><li class="src short"><a href="#v:newTempDir">newTempDir</a> :: <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a>, <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> ())</li><li class="src short"><a href="#v:fileEq">fileEq</a> :: <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src">module <a href="../base-4.9.1.0/System-IO.html">System.IO</a></p></div><div class="top"><p class="src"><a id="v:captureOutput" class="def">captureOutput</a> :: <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> a -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.9.1.0/Data-String.html#t:String">String</a>, a) <a href="src/System.IO.Extra.html#captureOutput" class="link">Source</a> <a href="#v:captureOutput" class="selflink">#</a></p><div class="doc"><p>Capture the <code><a href="../base-4.9.1.0/GHC-IO-Handle-FD.html#v:stdout">stdout</a></code> and <code><a href="../base-4.9.1.0/GHC-IO-Handle-FD.html#v:stderr">stderr</a></code> of a computation.</p><pre>captureOutput (print 1) == return (&quot;1\n&quot;,())</pre></div></div><div class="top"><p class="src"><a id="v:withBuffering" class="def">withBuffering</a> :: <a href="../base-4.9.1.0/GHC-IO-Handle.html#t:Handle">Handle</a> -&gt; <a href="../base-4.9.1.0/GHC-IO-Handle.html#t:BufferMode">BufferMode</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> a -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> a <a href="src/System.IO.Extra.html#withBuffering" class="link">Source</a> <a href="#v:withBuffering" class="selflink">#</a></p><div class="doc"><p>Execute an action with a custom <code><a href="../base-4.9.1.0/GHC-IO-Handle.html#t:BufferMode">BufferMode</a></code>, a wrapper around
   <code><a href="../base-4.9.1.0/GHC-IO-Handle.html#v:hSetBuffering">hSetBuffering</a></code>.</p></div></div><h1 id="g:1">Read encoding</h1><div class="top"><p class="src"><a id="v:readFileEncoding" class="def">readFileEncoding</a> :: <a href="../base-4.9.1.0/GHC-IO-Encoding-Types.html#t:TextEncoding">TextEncoding</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> <a href="src/System.IO.Extra.html#readFileEncoding" class="link">Source</a> <a href="#v:readFileEncoding" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="../base-4.9.1.0/System-IO.html#v:readFile">readFile</a></code>, but setting an encoding.</p></div></div><div class="top"><p class="src"><a id="v:readFileUTF8" class="def">readFileUTF8</a> :: <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> <a href="src/System.IO.Extra.html#readFileUTF8" class="link">Source</a> <a href="#v:readFileUTF8" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="../base-4.9.1.0/System-IO.html#v:readFile">readFile</a></code>, but with the encoding <code><a href="../base-4.9.1.0/GHC-IO-Encoding.html#v:utf8">utf8</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:readFileBinary" class="def">readFileBinary</a> :: <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> <a href="src/System.IO.Extra.html#readFileBinary" class="link">Source</a> <a href="#v:readFileBinary" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="../base-4.9.1.0/System-IO.html#v:readFile">readFile</a></code>, but for binary files.</p></div></div><h1 id="g:2">Strict reading</h1><div class="top"><p class="src"><a id="v:readFile-39-" class="def">readFile'</a> :: <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> <a href="src/System.IO.Extra.html#readFile%27" class="link">Source</a> <a href="#v:readFile-39-" class="selflink">#</a></p><div class="doc"><p>A strict version of <code><a href="../base-4.9.1.0/System-IO.html#v:readFile">readFile</a></code>. When the string is produced, the entire
   file will have been read into memory and the file handle will have been closed.
   Closing the file handle does not rely on the garbage collector.</p><pre>\(filter isHexDigit -&gt; s) -&gt; fmap (== s) $ withTempFile $ \file -&gt; do writeFile file s; readFile' file</pre></div></div><div class="top"><p class="src"><a id="v:readFileEncoding-39-" class="def">readFileEncoding'</a> :: <a href="../base-4.9.1.0/GHC-IO-Encoding-Types.html#t:TextEncoding">TextEncoding</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> <a href="src/System.IO.Extra.html#readFileEncoding%27" class="link">Source</a> <a href="#v:readFileEncoding-39-" class="selflink">#</a></p><div class="doc"><p>A strict version of <code><a href="System-IO-Extra.html#v:readFileEncoding">readFileEncoding</a></code>, see <code><a href="System-IO-Extra.html#v:readFile-39-">readFile'</a></code> for details.</p></div></div><div class="top"><p class="src"><a id="v:readFileUTF8-39-" class="def">readFileUTF8'</a> :: <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> <a href="src/System.IO.Extra.html#readFileUTF8%27" class="link">Source</a> <a href="#v:readFileUTF8-39-" class="selflink">#</a></p><div class="doc"><p>A strict version of <code><a href="System-IO-Extra.html#v:readFileUTF8">readFileUTF8</a></code>, see <code><a href="System-IO-Extra.html#v:readFile-39-">readFile'</a></code> for details.</p></div></div><div class="top"><p class="src"><a id="v:readFileBinary-39-" class="def">readFileBinary'</a> :: <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> <a href="src/System.IO.Extra.html#readFileBinary%27" class="link">Source</a> <a href="#v:readFileBinary-39-" class="selflink">#</a></p><div class="doc"><p>A strict version of <code><a href="System-IO-Extra.html#v:readFileBinary">readFileBinary</a></code>, see <code><a href="System-IO-Extra.html#v:readFile-39-">readFile'</a></code> for details.</p></div></div><h1 id="g:3">Write with encoding</h1><div class="top"><p class="src"><a id="v:writeFileEncoding" class="def">writeFileEncoding</a> :: <a href="../base-4.9.1.0/GHC-IO-Encoding-Types.html#t:TextEncoding">TextEncoding</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> () <a href="src/System.IO.Extra.html#writeFileEncoding" class="link">Source</a> <a href="#v:writeFileEncoding" class="selflink">#</a></p><div class="doc"><p>Write a file with a particular encoding.</p></div></div><div class="top"><p class="src"><a id="v:writeFileUTF8" class="def">writeFileUTF8</a> :: <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> () <a href="src/System.IO.Extra.html#writeFileUTF8" class="link">Source</a> <a href="#v:writeFileUTF8" class="selflink">#</a></p><div class="doc"><p>Write a file with the <code><a href="../base-4.9.1.0/GHC-IO-Encoding.html#v:utf8">utf8</a></code> encoding.</p><pre>\s -&gt; withTempFile $ \file -&gt; do writeFileUTF8 file s; fmap (== s) $ readFileUTF8' file</pre></div></div><div class="top"><p class="src"><a id="v:writeFileBinary" class="def">writeFileBinary</a> :: <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> () <a href="src/System.IO.Extra.html#writeFileBinary" class="link">Source</a> <a href="#v:writeFileBinary" class="selflink">#</a></p><div class="doc"><p>Write a binary file.</p><pre>\s -&gt; withTempFile $ \file -&gt; do writeFileBinary file s; fmap (== s) $ readFileBinary' file</pre></div></div><h1 id="g:4">Temporary files</h1><div class="top"><p class="src"><a id="v:withTempFile" class="def">withTempFile</a> :: (<a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> a) -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> a <a href="src/System.IO.Extra.html#withTempFile" class="link">Source</a> <a href="#v:withTempFile" class="selflink">#</a></p><div class="doc"><p>Create a temporary file in the temporary directory. The file will be deleted
   after the action completes (provided the file is not still open).
   The <code><a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a></code> will not have any file extension, will exist, and will be zero bytes long.
   If you require a file with a specific name, use <code><a href="System-IO-Extra.html#v:withTempDir">withTempDir</a></code>.</p><pre>withTempFile doesFileExist == return True
(doesFileExist =&lt;&lt; withTempFile return) == return False
withTempFile readFile' == return &quot;&quot;</pre></div></div><div class="top"><p class="src"><a id="v:withTempDir" class="def">withTempDir</a> :: (<a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> a) -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> a <a href="src/System.IO.Extra.html#withTempDir" class="link">Source</a> <a href="#v:withTempDir" class="selflink">#</a></p><div class="doc"><p>Create a temporary directory inside the system temporary directory.
   The directory will be deleted after the action completes.</p><pre>withTempDir doesDirectoryExist == return True
(doesDirectoryExist =&lt;&lt; withTempDir return) == return False
withTempDir listFiles == return []</pre></div></div><div class="top"><p class="src"><a id="v:newTempFile" class="def">newTempFile</a> :: <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a>, <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> ()) <a href="src/System.IO.Extra.html#newTempFile" class="link">Source</a> <a href="#v:newTempFile" class="selflink">#</a></p><div class="doc"><p>Provide a function to create a temporary file, and a way to delete a
   temporary file. Most users should use <code><a href="System-IO-Extra.html#v:withTempFile">withTempFile</a></code> which
   combines these operations.</p></div></div><div class="top"><p class="src"><a id="v:newTempDir" class="def">newTempDir</a> :: <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a>, <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> ()) <a href="src/System.IO.Extra.html#newTempDir" class="link">Source</a> <a href="#v:newTempDir" class="selflink">#</a></p><div class="doc"><p>Provide a function to create a temporary directory, and a way to delete a
   temporary directory. Most users should use <code><a href="System-IO-Extra.html#v:withTempDir">withTempDir</a></code> which
   combines these operations.</p></div></div><h1 id="g:5">File comparison</h1><div class="top"><p class="src"><a id="v:fileEq" class="def">fileEq</a> :: <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/System.IO.Extra.html#fileEq" class="link">Source</a> <a href="#v:fileEq" class="selflink">#</a></p><div class="doc"><p>Returns <code><a href="../base-4.9.1.0/Data-Bool.html#v:True">True</a></code> if both files have the same content.
   Raises an error if either file is missing.</p><pre>fileEq &quot;does_not_exist1&quot; &quot;does_not_exist2&quot; == undefined
fileEq &quot;does_not_exist&quot; &quot;does_not_exist&quot; == undefined
withTempFile $ \f1 -&gt; fileEq &quot;does_not_exist&quot; f1 == undefined
withTempFile $ \f1 -&gt; withTempFile $ \f2 -&gt; fileEq f1 f2
withTempFile $ \f1 -&gt; withTempFile $ \f2 -&gt; writeFile f1 &quot;a&quot; &gt;&gt; writeFile f2 &quot;a&quot; &gt;&gt; fileEq f1 f2
withTempFile $ \f1 -&gt; withTempFile $ \f2 -&gt; writeFile f1 &quot;a&quot; &gt;&gt; writeFile f2 &quot;b&quot; &gt;&gt; notM (fileEq f1 f2)</pre></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>